# Auto-generated by Cimas: Do not edit it manually!
# See https://github.com/metanorma/cimas
name: rake

on:
  push:
    branches: [ master, main ]
    tags: [ v* ]
    paths-ignore:
      - '.github/workflows/windows-debug.yml'
  pull_request:
    paths-ignore:
      - '.github/workflows/windows-debug.yml'

jobs:
  rake:
    uses: metanorma/ci/.github/workflows/generic-rake.yml@main
    with:
      before-setup-ruby: |
        vcpkg install libxml2:x64-windows pkg-config:x64-windows 2>&1 || true
        vcpkg integrate install 2>&1 || true
        echo "PKG_CONFIG_PATH=C:/vcpkg/installed/x64-windows/lib/pkgconfig" >> $GITHUB_ENV || true
        echo "LIBXML2_DIR=C:/vcpkg/installed/x64-windows" >> $GITHUB_ENV || true
    secrets:
      pat_token: ${{ secrets.METANORMA_CI_PAT_TOKEN }}
